# 작성일 2026 01 08
# 작업자 윤성민
# 설명 이 문서는 Docker 기반으로 개발 중인 PMS2를 향후 쿠버네티스로 전환할 때 필요한 배포 단위와 운영 원칙을 정리한 스캐폴딩이다
# 설명 백엔드와 프론트는 각각 독립 컨테이너 이미지로 배포하여 확장과 롤백 단위를 명확히 한다
# 설명 헬스 체크는 스프링 액추에이터를 기준으로 하고 Ingress와 네트워크 정책으로 노출 범위를 제어하는 것을 전제로 한다
# 설명 데이터베이스 마이그레이션은 운영으로 갈수록 애플리케이션 기동과 분리된 일회성 작업으로 수행하는 방식을 권장한다

# K8s 배포 스캐폴딩(초안)

이 디렉토리는 PMS2를 Docker 기반에서 K8s로 전환할 때의 **표준 배포 단위**를 고정하기 위한 스캐폴딩입니다.

## 표준 배포 단위
- Backend: `pms-backend` (Spring Boot 컨테이너 1개 = 서비스 1개)
- Frontend: `pms-frontend` (정적 리소스 서빙 컨테이너 1개 = SPA 1개)
- DB: 애플리케이션과 분리 운용(Managed DB 또는 별도 Stateful)

## 헬스체크
- Backend는 Actuator 기반을 표준으로 합니다.
  - liveness/readiness: `/actuator/health`
  - 노출 제어는 `application-*.yml` + Ingress/네트워크 정책으로 제한

## Flyway 마이그레이션 표준(권장)
- 운영으로 갈수록 **애플리케이션 기동 시 자동 실행** 대신
  - 배포 파이프라인에서 1회성 Job(마이그레이션 전용) 실행 → 성공 후 롤아웃
  를 권장합니다.

> 실제 매니페스트/헬름 차트는 Dev 환경 결정(클러스터/네임스페이스/Ingress) 후 추가합니다.
