# 작성일 2026 01 09
# 작업자 윤성민
# 설명 이 파일은 로컬 개발 환경에서 사용할 Postgres DB만 제공하는 Docker Compose 파일이다
# 설명 로컬 개발은 IntelliJ에서 백엔드를 실행하고 프론트는 Vite 개발 서버를 실행하는 방식으로 진행한다
# 설명 로컬 DB는 기본 포트 5432를 사용하며 데이터는 도커 볼륨에 저장되어 컨테이너를 내려도 유지된다
# 설명 dev test prod 절차 검증용 컨테이너 풀스택 실행은 별도 compose 파일을 사용한다

services:
  postgres:
    image: postgres:18
    container_name: pms-postgres
    restart: unless-stopped
    ports:
      - "${DB_PORT:-5432}:5432"
    environment:
      POSTGRES_DB: ${POSTGRES_DB:-pms}
      POSTGRES_USER: ${POSTGRES_USER:-pms}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-pms}
    volumes:
      # 설명 Postgres 18 이상은 /var/lib/postgresql 아래에 마운트하고 데이터는 하위 디렉터리에 저장하는 구성이 권장된다
      - postgres-data:/var/lib/postgresql

volumes:
  postgres-data:
